---
title: 嵌入式面试-知识点复习
index_img:  https://lonly-hexo-img.oss-cn-shanghai.aliyuncs.com/hexo_images/嵌入式面试-知识点复习/1694780455921.png
date: 2022-05-08 19:23
updated: 2023-02-22 23:23
hide: false
# sticky: 100 #置顶，数字越大越靠前
# banner_img: #/img/post_banner.jpg
# comment: false
categories: 00-项目
---

# 编程 语言

## 汇编

## C/C++

## 版本控制

# 计算机基础

## 计算机组成原理

## 操作系统

## 计算机网络

## 数据结构

## 计算机体系结构

## 数据库（）

## 编译原理

# 硬件
## 硬件基础

## 画图

## ARM

## 单片机

### 一、MCU对比
问题一：STM32F1和F4的区别？
- 内核不同：F1是Cortex-M3内核，F4是Cortex-M4内核；
- 主频不同：F1主频72MHz，F4主频168MHz；
- 浮点运算：F1无浮点运算单位，F4有；
- 功能性能：F4外设比F1丰富且功能更强大，比如GPIO翻转速率、上下拉电阻配置、ADC精度等；
- 内存大小：F1内部SRAM最大64K，F4有192K(112+64+16)。

### 二、STM32 启动过程
问题一：介绍以下STM32启动过程？
以F1为例

1. 通过Boot引脚设定,寻找初始地址，映射MSP和PC地址
1. 初始化堆栈指针 MSP = _initial_sp
2. 初始化程序计数器指针 PC = Reset_Handler，第一条指令开始执行程序
3. 设置堆和栈的大小
4. 初始化中断向量表
5. 配置外部 SRAM 作为数据存储器（可选）
6. 配置系统时钟，通过调用 SystemInit 函数（可选）
7. 调用 C 库中的_main 函数初始化用户堆栈，最终调用 main 函数

![初始化堆栈、MSP 和 PC后的内存情况](https://lonly-hexo-img.oss-cn-shanghai.aliyuncs.com/hexo_images/嵌入式面试-知识点复习/1694781717927.png)

### 三、GPIO
问题一：介绍以下GPIO？
GPIO 8种工作模式（gpio_init.GPIO_Mode）：
（1） GPIO_Mode_AIN 模拟输入
（2） GPIO_Mode_IN_FLOATING 浮空输入
（3） GPIO_Mode_IPD 下拉输入
（4） GPIO_Mode_IPU 上拉输入
（5） GPIO_Mode_Out_OD 开漏输出
（6） GPIO_Mode_Out_PP 推挽输出
（7） GPIO_Mode_AF_OD 复用开漏输出
（8） GPIO_Mode_AF_PP 复用推挽输出

APB2负责 AD，I/O，高级TIM，串口1。
APB1负责 DA，USB，SPI，I2C，CAN，串口2345，普通TIM，PWR

GPIO框图剖析：
![enter description here](https://lonly-hexo-img.oss-cn-shanghai.aliyuncs.com/hexo_images/嵌入式面试-知识点复习/1694781899346.png)


### 四、通信

问题一：串行通信方式介绍？
- 同步通信：I2C 半双工，SPI 全双工、UART全双工同步
- 异步通信：RS485 半双工、RS232 全双工、UART全双工异步
![enter description here](https://lonly-hexo-img.oss-cn-shanghai.aliyuncs.com/hexo_images/嵌入式面试-知识点复习/1694782402164.png)

问题二：数据同步方式
- 同步通信双方共用同一时钟信号，在总线上保持统一的时序和周期完成信息传输。
优点：可以实现高速率、大容量的数据传输，以及点对多点传输。
缺点：要求发送时钟和接收
时钟保持严格同步，收发双方时钟允许的误差较小，同时硬件复杂。
- 异步通信不需要时钟信号，而是在数据信号中加入开始位和停止位等一些同步信号，某些通信中还需要双方约定传输速率。
优点：没有时钟信号硬件简单，双方时钟可允许一定误差。
缺点：通信速率较低，只适用点对点传输。
![enter description here](https://lonly-hexo-img.oss-cn-shanghai.aliyuncs.com/hexo_images/嵌入式面试-知识点复习/1694782452020.png)

#### 串口

串口通信中，常用的协议包括RS-232、RS-422 和 RS-485 等。

问题一：串口协议简介
- 起始位，由一个逻辑 0的数据位表示
- 停止位，可以是 0.5、1、1.5 或 2 个逻辑 1 的数据位表示
- 有效数据位，5、6、7 或 8 个位长。低位（LSB）在前，高位（MSB）在后。
- 校验位，奇校验（数据和校验中1总数为奇数），偶校验，无校验
![enter description here](https://lonly-hexo-img.oss-cn-shanghai.aliyuncs.com/hexo_images/嵌入式面试-知识点复习/1694782688791.png)

问题一：串口初始化配置？
串口设置的一般步骤可以总结为如下几个步骤：
（1）串口时钟使能，GPIO时钟使能
（2）串口复位
（3）GPIO端口模式设置
（4）串口参数初始化，主要包含：波特率设置（115200）、8个数据位、1个停止位、奇偶校验位、硬件数据流控制、收发模式。
（5）开启中断并且初始化NVIC（如果需要开启中断才需要这个步骤）
（6）使能串口
（7）编写中断处理函数

问题二：USART主要特点？
（1）全双工操作（相互独立的接收数据和发送数据）；
（2）同步操作时，可主机时钟同步，也可从机时钟同步；
（3）独立的高精度波特率发生器，不占用定时/计数器；
（4）支持5、6、7、8和9位数据位，1或2位停止位的串行数据桢结构；
（5）由硬件支持的奇偶校验位发生和检验；
（6）数据溢出检测；
（7）帧错误检测；
（8）包括错误起始位的检测噪声滤波器和数字低通滤波器；
（9）三个完全独立的中断，TX发送完成、TX发送数据寄存器空、RX接收完成；
（10）支持多机通信模式；
（11）支持倍速异步通信模式。

#### I2C

问题一：I2C简介
- 高位（MSB）在前。
- 由数据线 SDA 和时钟线 SCL 构成
- 总线上每一个器件都有一个唯一的地址识别
- 数据线 SDA 和时钟线 SCL 都是双向线路，都通过一个电流源或上拉电阻连接到正电压。
- 起始信号，SCL 为高电平时，SDA 由高到低的跳变。是一种电平跳变时序信号。
- 停止信号，SCL 为高电平时，SDA 由低到高的跳变。是一种电平跳变时序信号
- 应答信号，发送器每发送一个字节，就在时钟脉冲 9 期间释放数据线，由接收器反馈一个应答信号。低电平为有效应答位（ACK 简称应答位），表示接收器成功地接收了该字节。
有效应答的要求是从机在第 9 个时钟脉冲之前的低电平期间将 SDA 线拉低
- 数据有效性，数据在 SCL 的上升沿到来之前就需准备好。并在下降沿到来之前必须稳定。SCL高电平期间检测数据
- 空闲状态，IIC 总线的 SDA 和 SCL 两条信号线同时处于高电平时，规定为总线的空闲状态。
![enter description here](https://lonly-hexo-img.oss-cn-shanghai.aliyuncs.com/hexo_images/嵌入式面试-知识点复习/1694783117060.png)


问题二：I2C配置主机模式端口该怎么配置？
软件模拟：
 - GPIO 时钟
 - SCL 推挽输出 SDA 开漏输出
 - 编写信号函数（起始信号，停止信号，应答信号）
 - 编写 IIC 的读写函数

问题三：I2C仲裁机制？
遵循“低电平优先”的原则，即谁先发送低电平谁就会掌握对总线的控制权。

问题三：I2C基本读写过程
- 从机地址+读/写 = 8位
![enter description here](https://lonly-hexo-img.oss-cn-shanghai.aliyuncs.com/hexo_images/嵌入式面试-知识点复习/1694784497420.png)
![enter description here](https://lonly-hexo-img.oss-cn-shanghai.aliyuncs.com/hexo_images/嵌入式面试-知识点复习/1694784501983.png)

#### SPI

问题一：SPI需要几根线？
 - MISO（Master In / Slave Out）主设备数据输入，从设备数据输出。
 - MOSI（Master Out / Slave In）主设备数据输出，从设备数据输入。
 - SCLK（Serial Clock）时钟信号，由主设备产生。
 - CS（Chip Select）从设备片选信号，由主设备产生。。
  
问题二：SPI 的传输方式：
 - 全双工通信，在任何时刻，主机与从机之间都可以同时进行数据的发送和接收。
 - 单工通信，就是在同一时刻，只有一个传输的方向，发送或者是接收。
 - 半双工通信，就是在同一时刻，只能为一个方向传输数据。

问题三：SPI通信的四种模式？
各个工作模式的不同在于 SCLK 不同, 具体工作由 CPOL，CPHA 决定。
 - CPOL: (Clock Polarity)，时钟极性：表示当SCLK空闲idle的时候，其电平的值是低电平0还是高电平1
 - CPHA:(Clock Phase)，时钟相位：对应着数据采样是在第几个边沿（edge），是第一个边沿还是第二个边沿，0对应着第一个边沿，1对应着第二个边沿。
 
![enter description here](https://lonly-hexo-img.oss-cn-shanghai.aliyuncs.com/hexo_images/嵌入式面试-知识点复习/1694785179612.png)

问题三：该如何确定使用哪种模式？
（1）先确认从机需求的 SCLK 极性，不工作时是在低电位还是高电位，由此确认 CPOL 为 0 或 1。
看原理图，我们设置串行同步时钟的空闲状态为高电平所以我们选择 SPI_CPOL_High。
也就是CPOL为1
（2）再由slave芯片 datasheet 中的时序图确认 slave 芯片是在 SCLK 的下降沿采集数据，还是在SCLK的上升沿。
翻译一下：
W25Q32JV通过SPI兼容总线访问，包括四个信号:串行时钟(CLK)，芯片选择(/CS)，串行数据输入(DI)和串行数据输出(DO)。标准SPI指令使用DI输入引脚串行地将指令、地址或数据写入CLK上升沿上的设备。DO输出引脚用于从CLK下降沿上的设备读取数据或状态。支持模式0(0,0)和3(1,1)的SPI总线操作。模式0和
模式3关注的是当SPI总线主端处于待机状态，数据没有被传输到串行Flash时CLK信号的正常状态。对于模式0，在下降和上升时，CLK信号通常是低的
边缘/ CS。对于模式3，在/CS的下降和上升边缘上CLK信号通常是高的。
既然串行同步时钟的空闲状态为高电平，这里我们选择第二个跳变沿，所以选择 SPI_CPHA_2Edge。
也就是CPHA为1
即，我们选择的是模式3(1,1)。


#### CAN
问题一：CAN总结介绍一下？
CAN控制器根据 CAN_L 和 CAN_H上 的电位差来判断总线电平。总线电平分为显性电平和隐性电平，二者比居其一。发送方通过使总线电平发生变化，将消息发送给接收方。
问题二：CAN初始化配置步骤?
（1）配置相关引脚的复用功能，使能CAN时钟
（2）设置CAN工作模式及波特率等（CAN初始化环回模式,波特率500Kbps ）
（3）设置滤波器
问题三：CAN发送数据格式?
CanTxMsg TxMessage;
TxMessage.StdId=0x12; // 标准标识符
TxMessage.ExtId=0x12; // 设置扩展标示符
TxMessage.IDE=CAN_Id_Standard; // 标准帧
TxMessage.RTR=CAN_RTR_Data; // 数据帧
TxMessage.DLC=len; // 要发送的数据长度 发送8个字节
for(i=0;i<len;i++)
TxMessage.Data[i]=msg[i]; //数据
解答：
————————————————
版权声明：本文为CSDN博主「聚优致成」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/qq_29350001/article/details/116021595

### 五、DMA
问题一：DMA介绍？
直接存储器存取(DMA) 用来提供在外设和存储器之间或者存储器和存储器之间的高速数据传输。无须CPU干预，数据可以通过DMA快速地移动，这就节省了CPU的资源来做其他操作。
问题一：DMA传输模式有几种？
DMA_Mode_Circular 循环模式
DMA_Mode_Normal 正常缓存模式
应用场景：GPS、蓝牙，都是用的循环采集，DMA_Mode_Circular模式。
————————————————
版权声明：本文为CSDN博主「聚优致成」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/qq_29350001/article/details/116021595

### 六、中断
问题一：描述一下中断的处理流程？
（1）初始化中断，设置触发方式是上升沿/下降沿/双沿触发。
（2）触发中断，进入中断服务函数
问题二：STM32的中断控制器支持多少个外部中断？
STM32的中断控制器支持19个外部中断/事件请求：
从图上来看，GPIO 的管脚 GPIOx.0~GPIOx.15(x=A，B，C，D，E，F，G)分别对应中断线 0 ~ 15。
另外四个EXTI线的连接方式如下：
● EXTI线16连接到PVD输出
● EXTI线17连接到RTC闹钟事件
● EXTI线18连接到USB唤醒事件
● EXTI线19连接到以太网唤醒事件(只适用于互联型产品)
中断服务函数列表：
IO口外部中断在中断向量表中只分配了7个中断向量，也就是只能使用7个中断服务函数。
EXTI0_IRQHandler
EXTI1_IRQHandler
EXTI2_IRQHandler
EXTI3_IRQHandler
EXTI4_IRQHandler
EXTI9_5_IRQHandler
EXTI15_10_IRQHandler
————————————————
版权声明：本文为CSDN博主「聚优致成」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/qq_29350001/article/details/116021595
### 七、时钟系统

问题一：STM32有几个时钟源？
STM32 有5个时钟源:HSI、HSE、LSI、LSE、PLL。
①、HSI是高速内部时钟，RC振荡器，频率为8MHz，精度不高。
②、HSE是高速外部时钟，可接石英/陶瓷谐振器，或者接外部时钟源，频率范围为4MHz~16MHz。
③、LSI是低速内部时钟，RC振荡器，频率为40kHz，提供低功耗时钟。　
④、LSE是低速外部时钟，接频率为32.768kHz的石英晶体。
⑤、PLL为锁相环倍频输出，其时钟输入源可选择为HSI/2、HSE或者HSE/2。倍频可选择为2~16倍，但是其输出频率最大不得超过72MHz。
————————————————
版权声明：本文为CSDN博主「聚优致成」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/qq_29350001/article/details/116021595

### ADC
问题一：简述STM32的ADC系统的功能特性？
（1）12bit分辨率
（2）自动校准
（3）可编程数据对齐（转换结果支持左对齐或右对齐方式存储在16位数据寄存器）
（4）单次和连续转换模式
### 定时器
问题：
问题一：已知STM32的系统时钟为72MHz，如何设置相关寄存器，实现20ms定时？
解答：
参看：STM32开发 – Systick定时器
通过SysTick_Config(SystemCoreClock / OS_TICKS_PER_SEC))//1ms定时器

其中：

uint32_t SystemCoreClock         = SYSCLK_FREQ_72MHz;        /*!< System Clock Frequency (Core Clock) */
#define SYSCLK_FREQ_72MHz  72000000
#define OS_TICKS_PER_SEC       1000    /* Set the number of ticks in one second    
1
2
3
如果需要20ms则，可以通一设置一个全局变量，然后定初值得为20，这样，每个systick中断一次，这个全局变量减1，减到0,即systick中断20次，时间为：1ms*20=20ms。从而实现20ms的定时。
————————————————
版权声明：本文为CSDN博主「聚优致成」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/qq_29350001/article/details/116021595

### HardFault_Handler处理
问题一：造成原因？
(1)数组越界操作；
(2)内存溢出，访问越界；
(3)堆栈溢出，程序跑飞；
(4)中断处理错误；
问题二：处理方式？
（1）在startup_stm32f10x_cl.s里找到HardFault_Handler的地址重映射，并重新编写，让其跳转到HardFaultHandle函数。
（2）打印查看R0、R1、R2、R3、R12、LR、PC、PSR寄存器。
（3） 查看Fault状态寄存器组（SCB->CFSR和SCB->HFSR）
————————————————
版权声明：本文为CSDN博主「聚优致成」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/qq_29350001/article/details/116021595


### 低功耗模式
问题一：低功耗模式有几种？唤醒方式是什么？
![在这里插入图片描述](https://lonly-hexo-img.oss-cn-shanghai.aliyuncs.com/hexo_images/嵌入式面试-知识点复习/1694784826538.png)
### 八、协议

#### Modbus

#### FreeRTOS

#### uCOSII

UCOSII任务调度
问题：
问题一：RTOS的任务是怎么写的？如何切出这个任务？
解答：
一个任务，也称作一个线程。
UCOS有一个任务调度机制，根据任务的优先级进行调度。
一个是硬件中断， 那么系统会将当前任务有关变量入栈，然后执行中断服务程序，执行完成后出栈返回.
另一个是任务之间的切换，使用的方法就是任务调度，每一个任务有自己的栈，顺度也是一样的入栈，然后执行另一个程序，然后出线返回。

并非是每一任务按优先级顺序轮流执行的，而是高优先级的任务独占运行，除非其主动放弃执行，否则低优先级任务不能抢占，同时高优先级可以把放出去给低优先级任务使用的CPU占用权抢回来。所以ucos的任务间要注意插入等待延时，以便ucos切出去让低优先级任务执行。

十二、UCOSII中任务间的通信
问题：
问题一：UCOSII中任务间的通信方式有哪几种？
解答：
在UCOSII中，是使用信号量、邮箱（消息邮箱）和消息队列这些被称作事件的中间环节来实现任务间的通信的，还有全局变量。
信号量：
参看：ucosII 信号量使用总结(举例讲解)
信号量用于：
1.控制共享资源的使用权（满足互斥条件）
2.标志某时间的发生
3.使2个任务的行为同步

应用实例：互斥信号量
作为互斥条件，信号量初始化为1。
实现目标：调用串口发送命令，必须等待返回“OK”字符过后，才能发送下一条命令。每个任务都有可能使用到此发送函数，不能出现冲突！

邮箱（消息邮箱）：

消息队列：
概念：
（1）消息队列实际上就是邮箱阵列。
（2）任务和中断都可以将一则消息放入队列中，任务可以从消息队列中获取消息。
（3）先进入队列的消息先传给任务(FIFO)。
（4）每个消息队列有一张等待消息任务的等待列表，如果消息列中没有消息，则等待消息的任务就被挂起，直到消息到来。

应用场景：
串口接收程序中的接收缓冲区。
储存外部事件。
————————————————
版权声明：本文为CSDN博主「聚优致成」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/qq_29350001/article/details/116021595

## FPGA


## 接口协议


# Linux

## 环境搭建

## bootloader

## 内核

## 驱动

## 文件系统一致

## 系统移植

## 应用编程

## 项目

# 其它

## 算法

## 图形学

## 虚拟化

## 高性能计算HPC

<!--more-->
